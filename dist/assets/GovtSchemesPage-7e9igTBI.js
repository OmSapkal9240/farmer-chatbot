import{c as b,a as p,j as e,r as d}from"./index-SuqBYE3h.js";import{S as u}from"./schemes-BP6yw30A.js";import{E as y,S as f}from"./search-CZ1BOo_3.js";import{S as j,D as v}from"./save-Cos4ygta.js";import{B as w}from"./bell-DMm_p-ge.js";const S=b("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),N=(a,r="relevance")=>{let s=[...u];if(a.searchTerm){const t=a.searchTerm.toLowerCase();s=s.filter(n=>n.name.en.toLowerCase().includes(t)||n.shortDesc.toLowerCase().includes(t)||n.tags.some(o=>o.toLowerCase().includes(t)))}switch(a.category&&a.category!=="all"&&(s=s.filter(t=>t.categories.includes(a.category))),a.pin&&a.pin.length,a.crop&&a.crop!=="all"&&(s=s.filter(t=>t.applicableCrops.includes("All")||t.applicableCrops.includes(a.crop))),r){case"newest":s.sort((t,n)=>new Date(n.lastUpdated)-new Date(t.lastUpdated));break;case"alphabetical":s.sort((t,n)=>t.name.en.localeCompare(n.name.en));break}return s},k=a=>{const r=JSON.parse(localStorage.getItem("saved_schemes"))||[];r.some(s=>s.id===a.id)||(r.push(a),localStorage.setItem("saved_schemes",JSON.stringify(r)))},C=()=>{const a=u.flatMap(r=>r.categories);return["all",...new Set(a)]},D=({scheme:a,onSelect:r,isSelected:s})=>{const{t,i18n:n}=p();return e.jsxs("div",{onClick:r,className:`p-4 rounded-lg cursor-pointer transition-all duration-200 ${s?"bg-green-800/50 ring-2 ring-green-500":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("h3",{className:"font-bold text-lg text-green-400",children:t(a.name[n.language]||a.name.en)}),e.jsx("p",{className:"text-sm text-gray-400 mt-1 mb-2",children:a.shortDesc}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.categories.map(o=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded-full capitalize",children:o},o))})]})},L=({schemes:a,onSelectScheme:r,selectedSchemeId:s})=>e.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:a.length>0?a.map(t=>e.jsx(D,{scheme:t,onSelect:()=>r(t),isSelected:s===t.id},t.id)):e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No schemes match your criteria."})}),h=["Overview","Eligibility","Benefits","How to Apply","Documents"],B=({scheme:a})=>{const{t:r,i18n:s}=p(),[t,n]=d.useState(h[0]),o=()=>{k(a),alert(`${r(a.name[s.language]||a.name.en)} saved to your schemes!`)},l=()=>{const c=`Scheme: ${r(a.name[s.language]||a.name.en)}
Benefits: ${a.benefits}`,m=new Blob([c],{type:"text/plain"}),g=URL.createObjectURL(m),x=document.createElement("a");x.href=g,x.download=`${a.id}-summary.txt`,x.click(),URL.revokeObjectURL(g)},i=()=>{switch(t){case"Eligibility":return e.jsx("p",{children:a.eligibility});case"Benefits":return e.jsx("p",{children:a.benefits});case"How to Apply":return e.jsx("p",{children:a.regionNotes});case"Documents":return e.jsx("ul",{children:a.documents.map(c=>e.jsxs("li",{children:["- ",c]},c))});default:return e.jsx("p",{children:a.longDesc})}};return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg h-full",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-green-400",children:r(a.name[s.language]||a.name.en)}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Last updated: ",new Date(a.lastUpdated).toLocaleDateString()]})]}),e.jsx("span",{className:"px-3 py-1 text-xs font-bold bg-green-600 text-white rounded-full",children:"Active"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 my-4",children:[e.jsxs("a",{href:a.officialLink,target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:[e.jsx(y,{size:16})," Official Page"]}),e.jsxs("button",{onClick:o,className:"btn-secondary",children:[e.jsx(j,{size:16})," Save Scheme"]}),e.jsxs("button",{onClick:l,className:"btn-secondary",children:[e.jsx(v,{size:16})," Download"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx(S,{size:16})," Share"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx(w,{size:16})," Notify Me"]})]}),e.jsx("div",{className:"border-b border-gray-700 mb-4",children:e.jsx("nav",{className:"-mb-px flex space-x-4",children:h.map(c=>e.jsx("button",{onClick:()=>n(c),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${t===c?"border-green-500 text-green-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500"}`,children:c},c))})}),e.jsx("div",{className:"text-gray-300 text-sm leading-relaxed min-h-[200px]",children:i()}),e.jsx("style",{jsx:!0,children:`
        .btn-primary {
          display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background-color: #10B981; color: white; border-radius: 0.5rem; font-weight: bold; transition: background-color 0.2s;
        }
        .btn-primary:hover { background-color: #059669; }
        .btn-secondary {
          display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background-color: #4B5563; color: white; border-radius: 0.5rem; font-weight: bold; transition: background-color 0.2s;
        }
        .btn-secondary:hover { background-color: #6B7280; }
      `})]})},T=({filters:a,setFilters:r,sortBy:s,setSortBy:t})=>{const n=C(),o=l=>{const{name:i,value:c}=l.target;r(m=>({...m,[i]:c}))};return e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg mb-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",name:"searchTerm",value:a.searchTerm,onChange:o,placeholder:"Search schemes...",className:"w-full p-3 pl-10 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-bold text-gray-300 mb-1",children:"Category"}),e.jsx("select",{id:"category-filter",name:"category",value:a.category,onChange:o,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-white",children:n.map(l=>e.jsx("option",{value:l,className:"capitalize",children:l.charAt(0).toUpperCase()+l.slice(1)},l))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-by",className:"block text-sm font-bold text-gray-300 mb-1",children:"Sort By"}),e.jsxs("select",{id:"sort-by",value:s,onChange:l=>t(l.target.value),className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-white",children:[e.jsx("option",{value:"relevance",children:"Relevance"}),e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"alphabetical",children:"Alphabetical"})]})]})]})]})},O=()=>{const[a,r]=d.useState({searchTerm:"",category:"all",pin:"",crop:"all"}),[s,t]=d.useState("relevance"),[n,o]=d.useState([]),[l,i]=d.useState(null);return d.useEffect(()=>{const c=N(a,s);o(c),l&&!c.find(m=>m.id===l.id)&&i(null)},[a,s,l]),e.jsxs("div",{className:"container mx-auto p-4 md:p-6 bg-gray-900 text-white rounded-lg",children:[e.jsxs("header",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-green-400",children:"Government Schemes for Farmers"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Find and understand schemes that can benefit you."}),e.jsx("div",{className:"mt-2 text-xs text-yellow-400 bg-yellow-900/50 p-2 rounded-md max-w-2xl mx-auto",children:"Data shown is a summary for demo purposes. Always visit official government links for full details."})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-8",children:[e.jsxs("div",{className:"w-full lg:w-2/5 mb-8 lg:mb-0",children:[e.jsx(T,{filters:a,setFilters:r,sortBy:s,setSortBy:t}),e.jsx(L,{schemes:n,onSelectScheme:i,selectedSchemeId:l?.id})]}),e.jsx("main",{className:"w-full lg:w-3/5",children:l?e.jsx(B,{scheme:l}):e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-800 p-8 rounded-lg text-center",children:e.jsx("p",{className:"text-gray-400",children:"Select a scheme from the list to see the details."})})})]})]})};export{O as default};
