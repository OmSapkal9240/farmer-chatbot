import{c as p,j as e,a as F,r as m,A as z,m as k,X as q,C as J,b as H}from"./index-SuqBYE3h.js";import{E as U,S as V}from"./search-CZ1BOo_3.js";import{c as I,A as M}from"./crops-N1iP_pkT.js";import{I as Z,M as Y}from"./map-pin-WrJvmC1D.js";import{S as Q,D as X}from"./save-Cos4ygta.js";const _=p("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),ee=p("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),se=p("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),te=p("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),ae=p("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),$=p("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]),le=p("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),A={tomato:[{name:"Imidacloprid 17.8% SL",type:"Insecticide",useCase:"Controls aphids & whiteflies",price:"₹280 – ₹350",link:"https://www.amazon.in/s?k=Imidacloprid+17.8%25+SL",image:"https://via.placeholder.com/150/1a2e0b/ffffff?text=Imi",icon:e.jsx($,{size:16,className:"text-yellow-400"})},{name:"Mancozeb 75% WP",type:"Fungicide",useCase:"Prevents leaf spot & blight",price:"₹220 – ₹300",link:"https://www.flipkart.com/search?q=Mancozeb+75%25+WP",image:"https://via.placeholder.com/150/1a2e0b/ffffff?text=Man",icon:e.jsx(te,{size:16,className:"text-red-400"})},{name:"NPK 19:19:19",type:"Fertilizer",useCase:"Balanced crop nutrition",price:"₹950 – ₹1100",link:"https://www.indiamart.com/search.mp?ss=NPK+19%3A19%3A19",image:"https://via.placeholder.com/150/1a2e0b/ffffff?text=NPK",icon:e.jsx(ee,{size:16,className:"text-blue-400"})}],default:[{name:"Neem Oil Concentrate",type:"Pesticide",useCase:"Broad-spectrum pest control",price:"₹350 – ₹450",link:"https://example.com/neem-oil",image:"https://via.placeholder.com/150/1a2e0b/ffffff?text=Neem",icon:e.jsx($,{size:16,className:"text-yellow-400"})}]},re=({product:s})=>e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-teal-500/20 border border-white/10",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-20 object-cover rounded-md mb-3"}),e.jsx("h4",{className:"font-bold text-base text-[#e8f1ff] truncate",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-[#9fb3c8] mb-1",children:[s.icon,e.jsx("span",{children:s.type})]}),e.jsx("p",{className:"text-sm text-[#9fb3c8] mb-2 h-10",children:s.useCase}),e.jsx("p",{className:"font-semibold text-lg text-[#34e89e] mb-3",children:s.price}),e.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"w-full text-sm flex items-center justify-center space-x-2 bg-teal-600/50 text-white font-semibold py-2 px-3 rounded-lg transition-all duration-300 hover:bg-teal-500 hover:shadow-lg hover:shadow-teal-500/40 transform hover:-translate-y-0.5",children:[e.jsx("span",{children:"View on Store"}),e.jsx(U,{size:14})]})]}),ne=({cropId:s})=>{const t=A[s]||A.default;return e.jsxs("div",{className:"mt-6 border-t border-teal-300/20 pt-4",children:[e.jsxs("h3",{className:"flex items-center space-x-2 text-lg font-bold text-[#e8f1ff] mb-1",children:[e.jsx(ae,{size:20,className:"text-[#34e89e]"}),e.jsx("span",{children:"Recommended Products"})]}),e.jsx("p",{className:"text-sm text-[#9fb3c8] mb-4",children:"Trusted inputs for your crop"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map(n=>e.jsx(re,{product:n},n.name))})]})},E=(s,t)=>s>=5&&s<=9?"Kharif":s>=10||s<=2?"Rabi":"Zaid",L={Maharashtra:{Kharif:["cotton","soybean","paddy","bajra"],Rabi:["wheat","gram","onion","sugarcane"],Zaid:["groundnut","maize","vegetables"]},Punjab:{Kharif:["paddy","maize","cotton"],Rabi:["wheat","mustard","gram"],Zaid:["vegetables","maize"]},default:{Kharif:["paddy","maize","soybean"],Rabi:["wheat","gram","mustard"],Zaid:["vegetables","groundnut"]}},ie=(s,t)=>!s||!t?"Ensure proper drainage during monsoon to avoid root rot.":s.temp>35?`High temperatures detected (${s.temp}°C). Ensure frequent irrigation for ${t.name} to prevent heat stress.`:s.humidity>85?`High humidity (${s.humidity}%) increases the risk of fungal diseases. Ensure good air circulation around plants.`:s.rainfall>5?`Heavy rainfall detected. Check fields for waterlogging and ensure proper drainage for ${t.name}.`:s.wind>5.5?"Strong winds detected. Young plants may need support. Check for damage after wind subsides.":"Weather conditions seem favorable. Continue standard crop management practices.",O=(s,t)=>{const o=(L[s]||L.default)[t]||[];if(o.length===0)return I.slice(0,5);const l=I.filter(c=>o.includes(c.id));return l.length>0?l:I.slice(0,5)},oe=({crops:s,selectedCrop:t,onSelectCrop:n,weather:o})=>{const{t:l}=F(),[c,b]=m.useState(""),u=s.filter(r=>l(r.name).toLowerCase().includes(c.toLowerCase())),d=()=>{const r=`I have ${l(t.name)} - with symptoms - location 421302. Please advise.`;alert(`Chat context sent (mock):
"${r}"`),console.log("Chat context:",{crop:t.id,location:"421302",message:r})};return e.jsxs("div",{className:"bg-black/20 backdrop-blur-lg border border-teal-300/20 p-4 rounded-lg shadow-lg h-full",children:[e.jsx("div",{className:"lg:hidden mb-4",children:e.jsx("select",{value:t?.id||"",onChange:r=>n(s.find(g=>g.id===r.target.value)),className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-green-500","aria-label":"Select a Crop",children:s.map(r=>e.jsx("option",{value:r.id,children:l(r.name)},r.id))})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-[#e8f1ff]",children:"Select Crop"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search crops...",value:c,onChange:r=>b(r.target.value),className:"w-full p-3 pl-10 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-green-500"}),e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20})]}),e.jsx("ul",{className:"space-y-1 max-h-60 overflow-y-auto mb-4 pr-2",children:u.map(r=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>n(r),className:`w-full text-left p-2.5 rounded-md flex items-center space-x-3 transition-all duration-200 ${t?.id===r.id?"bg-[#34e89e]/20 text-[#34e89e] font-semibold border-l-2 border-[#34e89e]":"text-[#9fb3c8] hover:bg-white/10"}`,children:[e.jsx("img",{src:r.icon,alt:`${l(r.name)} icon`,className:"w-8 h-8 rounded-full"}),e.jsx("span",{children:l(r.name)}),e.jsx("span",{className:"text-xs text-[#9fb3c8] ml-auto",children:r.seasons[0]})]})},r.id))})]}),t&&e.jsxs("div",{className:"mt-4 border-t border-teal-300/20 pt-4",children:[e.jsxs("h3",{className:"flex items-center space-x-2 font-bold text-lg mb-2 text-[#e8f1ff]",children:[e.jsx(Z,{size:18,className:"text-blue-400"}),e.jsx("span",{children:"Quick Facts"})]}),e.jsxs("div",{className:"text-sm text-[#9fb3c8] bg-black/20 p-3 rounded-md",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-[#e8f1ff]",children:"Season:"})," ",t.seasons.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-[#e8f1ff]",children:"Family:"})," ",t.family]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"flex items-center space-x-2 font-bold text-lg mb-2 text-[#e8f1ff]",children:[e.jsx(M,{size:18,className:"text-yellow-400"}),e.jsx("span",{children:"Seasonal Tip"})]}),e.jsx("p",{className:"text-sm text-yellow-200 bg-yellow-400/10 p-3 rounded-md border border-yellow-400/20",children:ie(o,t)})]}),e.jsx(ne,{cropId:t.id}),e.jsxs("button",{onClick:d,className:"w-full mt-6 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 flex items-center justify-center space-x-2 transition-transform transform hover:scale-105 active:scale-100","aria-label":`Start chat about ${l(t.name)}`,children:[e.jsx(_,{size:20}),e.jsx("span",{children:"Start Chat (with context)"})]})]})]})},T=["January","February","March","April","May","June","July","August","September","October","November","December"],ce=({calendarData:s})=>{const[t,n]=m.useState(T[new Date().getMonth()]),o=s[t]||["No specific tasks for this month."];return e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-[#e8f1ff]",children:"Monthly Crop Calendar"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:T.map(l=>e.jsx("button",{onClick:()=>n(l),className:`px-3 py-1 text-sm font-medium rounded-full transition-colors ${t===l?"bg-[#34e89e] text-black shadow-lg shadow-teal-500/30":"bg-white/10 text-[#9fb3c8] hover:bg-white/20 border border-white/10"}`,children:l},l))}),e.jsxs("div",{className:"mt-4 p-4 bg-black/20 rounded-md border border-white/10",children:[e.jsxs("h4",{className:"font-semibold text-md mb-2 text-[#e8f1ff]",children:["Tasks for ",t,":"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-[#9fb3c8]",children:o.map((l,c)=>e.jsx("li",{children:l},c))})]})]})},de=({images:s,onClose:t,cropName:n})=>{const o=l=>{const c=`Image attached for ${n} — please diagnose.`;alert(`Issue reported (mock):
"${c}"
Image: ${l}`),console.log("Diagnosis request:",{cropName:n,image:l,message:c}),t()};return e.jsx(z,{children:e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(k.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-3xl w-full relative",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-2 right-2 p-2 text-gray-500 hover:bg-gray-200 rounded-full z-10",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Symptom Images for ",n]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 max-h-[70vh] overflow-y-auto",children:s.map((l,c)=>e.jsxs("div",{className:"border rounded-lg overflow-hidden group",children:[e.jsx("img",{src:l,alt:`Symptom ${c+1}`,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-3",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Example Image ",c+1]}),e.jsxs("button",{onClick:()=>o(l),className:"w-full text-sm bg-red-500 text-white font-semibold py-1.5 px-3 rounded-md hover:bg-red-600 flex items-center justify-center space-x-1.5",children:[e.jsx(M,{size:16}),e.jsx("span",{children:"Report Issue"})]})]})]},c))})]})]})})})},me=({crop:s})=>{const[t,n]=m.useState([]),[o,l]=m.useState(""),[c,b]=m.useState(!1),u=async()=>{if(o.trim()==="")return;const d={role:"user",content:o};n(r=>[...r,d]),l(""),b(!0);try{const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:`You are an expert agricultural assistant. Provide advice for ${s.name}.`},...t,d]})});if(!r.ok)throw new Error("API request failed");const f=(await r.json()).choices[0].message;n(y=>[...y,f])}catch(r){console.error("Error fetching from GPT API:",r);const g={role:"assistant",content:"Sorry, I am having trouble getting a response. Please try again."};n(f=>[...f,g])}finally{b(!1)}};return e.jsxs("div",{className:"chatbot-container p-4 bg-gray-800 text-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"messages-container h-64 overflow-y-auto mb-4 p-2 bg-gray-700 rounded",children:[t.map((d,r)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`message ${d.role==="user"?"text-right":"text-left"} mb-2`,children:e.jsx("span",{className:`inline-block p-2 rounded-lg ${d.role==="user"?"bg-blue-500":"bg-gray-600"}`,children:d.content})},r)),c&&e.jsx("div",{className:"text-center",children:"Thinking..."})]}),e.jsxs("div",{className:"input-container flex",children:[e.jsx("input",{type:"text",value:o,onChange:d=>l(d.target.value),onKeyPress:d=>d.key==="Enter"&&u(),className:"flex-grow p-2 rounded-l-lg bg-gray-600 border-none focus:outline-none",placeholder:`Ask about ${s.name}...`}),e.jsx("button",{onClick:u,className:"bg-blue-500 p-2 rounded-r-lg hover:bg-blue-600 transition-colors",children:"Send"})]})]})},xe=({crop:s})=>{const{t}=F(),[n,o]=m.useState("overview"),[l,c]=m.useState(null),[b,u]=m.useState(!1),[d,r]=m.useState([]),g=a=>{c(l===a?null:a)},f=a=>{r(a),u(!0)},y=()=>{const a=`Crop Care Plan for ${t(s.name)}

${JSON.stringify(s,null,2)}`,i=new Blob([a],{type:"text/plain"}),x=URL.createObjectURL(i),h=document.createElement("a");h.href=x,h.download=`${s.id}-care-plan.txt`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(x),alert("Downloaded a sample plan. (mock)")},N=()=>{let a=JSON.parse(localStorage.getItem("myFarm"))||[];a.includes(s.id)||(a.push(s.id),localStorage.setItem("myFarm",JSON.stringify(a)),alert(`${t(s.name)} saved to 'My Farm'.`))},C=["overview","symptoms","management","fertilizer","calendar","chat"],P=()=>{switch(n){case"overview":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[#9fb3c8] text-base leading-relaxed",children:t(s.overview.description)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-[#e8f1ff]",children:"Ideal Sowing Window:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.overview.sowingWindow.map(a=>e.jsx("span",{className:"bg-teal-400/10 text-teal-300 text-sm font-medium px-3 py-1 rounded-full border border-teal-400/20",children:a},a))})]}),e.jsxs("p",{className:"text-[#9fb3c8]",children:[e.jsx("strong",{className:"text-[#e8f1ff]",children:"Spacing:"})," ",s.overview.spacing]}),e.jsxs("p",{className:"text-[#9fb3c8]",children:[e.jsx("strong",{className:"text-[#e8f1ff]",children:"Seed Rate:"})," ",s.overview.seedRate]})]});case"symptoms":return e.jsx("div",{className:"space-y-3",children:s.symptoms.map(a=>e.jsxs("div",{className:"border border-white/10 rounded-md bg-white/5",children:[e.jsxs("button",{onClick:()=>g(a.id),className:"w-full p-4 text-left flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-[#e8f1ff]",children:t(a.name)}),e.jsx(J,{className:`transform transition-transform ${l===a.id?"rotate-180":""}`})]}),e.jsx(z,{children:l===a.id&&e.jsx(k.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 border-t border-white/10 bg-black/20",children:[e.jsxs("p",{className:"text-[#9fb3c8]",children:[e.jsx("strong",{children:"Cause:"})," ",a.cause]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("strong",{className:"text-green-400",children:"Do:"}),e.jsx("ul",{className:"list-disc list-inside ml-2 text-[#9fb3c8]",children:a.action.do.map(i=>e.jsx("li",{children:i},i))})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("strong",{className:"text-red-400",children:"Don't:"}),e.jsx("ul",{className:"list-disc list-inside ml-2 text-[#9fb3c8]",children:a.action.dont.map(i=>e.jsx("li",{children:i},i))})]}),e.jsxs("button",{onClick:()=>f(a.images),className:"mt-3 text-sm text-teal-400 hover:underline flex items-center space-x-1",children:[e.jsx(se,{size:16}),e.jsx("span",{children:"See Example Images"})]})]})})})]},a.id))});case"management":return e.jsx("div",{className:"space-y-4",children:s.management.map(a=>e.jsxs("div",{className:"p-4 border border-white/10 rounded-lg bg-white/5",children:[e.jsx("h4",{className:"font-bold text-lg mb-2 text-[#e8f1ff]",children:a.stage}),e.jsx("p",{className:"font-semibold text-[#e8f1ff]",children:"Organic Options:"}),e.jsx("ul",{className:"list-disc list-inside ml-2 mb-2 text-[#9fb3c8]",children:a.organic.map(i=>e.jsx("li",{children:i},i))}),e.jsx("p",{className:"font-semibold text-[#e8f1ff]",children:"Chemical Options:"}),e.jsx("ul",{className:"list-disc list-inside ml-2 text-[#9fb3c8]",children:a.chemical.map(i=>e.jsx("li",{children:i},i))}),e.jsxs("p",{className:"mt-3 text-sm text-yellow-200 bg-yellow-400/10 p-2 rounded-md border border-yellow-400/20",children:[e.jsx("strong",{children:"Safety Note:"})," ",a.safetyNote]})]},a.stage))});case"fertilizer":return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white/5 border border-white/10 rounded-lg",children:[e.jsx("thead",{className:"bg-white/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-[#e8f1ff]",children:"Timing"}),e.jsx("th",{className:"p-3 text-left font-semibold text-[#e8f1ff]",children:"N-P-K Ratio"}),e.jsx("th",{className:"p-3 text-left font-semibold text-[#e8f1ff]",children:"Details"})]})}),e.jsx("tbody",{children:s.fertilizerSchedule.map(a=>e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("td",{className:"p-3 text-[#9fb3c8]",children:a.timing}),e.jsx("td",{className:"p-3 font-mono text-[#9fb3c8]",children:a.npk}),e.jsx("td",{className:"p-3 text-[#9fb3c8]",children:a.details})]},a.timing))})]})});case"calendar":return e.jsx(ce,{calendarData:s.calendar});case"chat":return e.jsx(me,{crop:s});default:return null}};return e.jsxs("div",{className:"bg-gradient-to-br from-[#0f1b2e] to-[#132b45] border border-teal-300/20 rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.heroImage,alt:`${t(s.name)} hero banner`,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#e8f1ff]",children:t(s.name)}),e.jsx("p",{className:"text-[#9fb3c8] italic",children:s.scientificName})]}),e.jsxs("span",{className:"absolute top-4 right-4 bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full flex items-center space-x-1",children:[e.jsx(le,{size:14}),e.jsx("span",{children:"Difficulty: Easy"})]})]}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"border-b border-white/10",children:e.jsx("nav",{className:"-mb-px flex space-x-4","aria-label":"Tabs",children:C.map(a=>e.jsx("button",{onClick:()=>o(a),className:`whitespace-nowrap py-3 px-2 border-b-2 font-semibold text-base capitalize transition-all duration-200 ${n===a?"border-[#34e89e] text-[#34e89e]":"border-transparent text-[#9fb3c8] hover:text-[#e8f1ff] hover:border-white/30"}`,children:a},a))})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:N,className:"p-2 text-[#9fb3c8] hover:bg-white/10 rounded-full transition-colors","aria-label":"Save to My Farm",children:e.jsx(Q,{size:20})}),e.jsx("button",{onClick:y,className:"p-2 text-[#9fb3c8] hover:bg-white/10 rounded-full transition-colors","aria-label":"Download as PDF",children:e.jsx(X,{size:20})})]})]}),e.jsx(z,{mode:"wait",children:e.jsx(k.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},children:P()},n)})]}),b&&e.jsx(de,{images:d,onClose:()=>u(!1),cropName:t(s.name)})]})},he=()=>new Promise((s,t)=>{if(!navigator.geolocation)return t(new Error("Geolocation is not supported by your browser."));navigator.geolocation.getCurrentPosition(n=>s(n.coords),n=>t(n))}),fe=async(s,t)=>{throw new Error("OpenCage API key is missing.")},ue=async s=>{throw new Error("OpenCage API key is missing.")},R=async(s,t)=>{throw new Error("OpenWeatherMap API key is missing.")},ge=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-700 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-6",children:[e.jsx("div",{className:"w-full lg:w-1/3 lg:max-w-sm mb-6 lg:mb-0",children:e.jsxs("div",{className:"bg-black/20 p-4 rounded-lg h-full space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/2"}),e.jsx("div",{className:"h-10 bg-gray-700 rounded"}),e.jsx("div",{className:"h-40 bg-gray-700 rounded"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"})]})}),e.jsx("div",{className:"w-full lg:w-2/3",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#0f1b2e] to-[#132b45] border border-teal-300/20 rounded-lg p-6",children:[e.jsx("div",{className:"h-48 bg-gray-700 rounded mb-6"}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("div",{className:"h-10 bg-gray-700 rounded w-1/2"}),e.jsx("div",{className:"h-10 bg-gray-700 rounded w-1/4"})]}),e.jsx("div",{className:"h-64 bg-gray-700 rounded"})]})})]})]}),be=({message:s})=>e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 text-red-300 p-4 rounded-lg flex items-center space-x-3 mb-6",children:[e.jsx(M,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:"An Error Occurred"}),e.jsx("p",{className:"text-sm",children:s})]})]}),pe=({onPinSubmit:s})=>{const[t,n]=m.useState(""),o=l=>{l.preventDefault(),t.length===6&&!isNaN(t)&&s(t)};return e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 text-yellow-300 p-4 rounded-lg mb-6",children:[e.jsx("p",{className:"text-sm mb-2",children:"Could not automatically detect your location. Please enter your 6-digit PIN code to get localized advice."}),e.jsxs("form",{onSubmit:o,className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:t,onChange:l=>n(l.target.value),placeholder:"Enter 6-digit PIN",maxLength:6,className:"w-full p-2 pl-10 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-green-500"})]}),e.jsx("button",{type:"submit",className:"bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-teal-500 disabled:bg-gray-500",disabled:t.length!==6||isNaN(t),children:"Submit"})]})]})},Se=()=>{const[s,t]=H(),[n,o]=m.useState(null),[l,c]=m.useState(null),[b,u]=m.useState(null),[d,r]=m.useState(!0),[g,f]=m.useState(null),[y,N]=m.useState([]);m.useEffect(()=>{const a=async x=>{try{r(!0),f(null);const[h,w]=await Promise.all([fe(x.latitude,x.longitude),R(x.latitude,x.longitude)]);c(h),u(w);const v=new Date().getMonth(),K=E(v,w.rainfall),j=O(h.state,K);N(j);const D=s.get("crop"),W=localStorage.getItem("lastViewedCrop"),B=D||W||j[0]?.id,S=j.find(G=>G.id===B);o(S||j[0]),S&&!D?t({crop:S.id},{replace:!0}):!S&&j.length>0&&t({crop:j[0].id},{replace:!0})}catch(h){console.error(h),f("Could not fetch location or weather data. Please enable location services or enter a PIN code manually.")}finally{r(!1)}};(async()=>{try{const x=await he();await a(x)}catch(x){console.error(x),f("Geolocation permission denied. Please enter your PIN code manually."),r(!1)}})()},[s,t]);const C=async a=>{try{r(!0),f(null);const i=await ue(a),x=await R(i.lat,i.lon);c(i),u(x);const h=new Date().getMonth(),w=E(h,x.rainfall),v=O(i.state,w);N(v),o(v[0])}catch(i){console.error(i),f("Could not fetch data for the provided PIN code. Please check the PIN and try again.")}finally{r(!1)}},P=a=>{o(a),t({crop:a.id}),localStorage.setItem("lastViewedCrop",a.id)};return e.jsxs("div",{className:"container mx-auto p-4 font-sans bg-gradient-to-br from-[#0f1b2e] to-[#132b45] text-[#e8f1ff] rounded-lg",children:[e.jsxs("header",{className:"mb-6",children:[g&&!d&&e.jsx(pe,{onPinSubmit:C}),g&&e.jsx(be,{message:g}),e.jsx("h1",{className:"text-3xl font-bold text-[#34e89e]",children:"Crop Care Advisory"}),e.jsx("p",{className:"text-[#9fb3c8]",children:"Your guide to healthy crops and better yields."}),l&&e.jsxs("p",{className:"text-sm text-teal-300 mt-1",children:["Showing recommendations for: ",l.district,", ",l.state]})]}),d?e.jsx(ge,{}):e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-6",children:[e.jsx("aside",{className:"w-full lg:w-1/3 lg:max-w-sm mb-6 lg:mb-0",children:e.jsx(oe,{crops:y,selectedCrop:n,onSelectCrop:P,weather:b,location:l})}),e.jsx("main",{className:"w-full lg:w-2/3",children:n?e.jsx(xe,{crop:n,weather:b,location:l}):e.jsx("div",{className:"flex items-center justify-center h-full bg-[#0f1b2e]/50 rounded-lg",children:e.jsx("p",{className:"text-[#9fb3c8]",children:"Please select a crop to see the details."})})})]})]})};export{Se as default};
